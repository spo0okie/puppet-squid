# puppet-squid
модуль управления squid
состоит из классов
## squid 
устанавливает типовую конфигурацию сквида 
### задачи
* черные списки
* белые списки
* прозрачное проксирование
* включая https
### решение
модуль 
* устанавливает репозиторий с последней версией сквида
* устанавливает сквид
* заливает конфиг, который настраивает сквид под все вышеперечисленные задачи
* заливает папку с черными и белыми списками
 
## squid::iptables 
решает задачу заворачивания HTTP и HTTPS пакетов идущих через сервер форвардом в прокси порты.
Для этого 
* создает файл автозагрузки с правилами для фаервола. 
* запускает его без перезагрузки, если правил еще нет в таблице. 

## squid::sqstat
Устанавливает на сервер утилиту мониторинга сквида.
Для этого 
* копирует на целевой сервер папку с утилитой sqstat 
* настраивает apache vhost для нее на порту 3180 
 
## squid::lightsquid
Устанавливает на сервер утилиту отчетов сквида. 
Для этого 
* копирует на целевой сервер папку с утилитой lightsquid 
* настраивает apache vhost для нее на порту 3181 
* добавляет в крон генерацию отчетов 
